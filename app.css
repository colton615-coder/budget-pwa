/* ===== Budget Buddy v1.4 — original look, iOS safe ===== */
:root {
  --bg:#0f1115; --card:#161a22; --line:#222736; --text:#e7e9ee;
  --muted:#a8afc0; --accent:#5aa3ff; --good:#3ad26b; --danger:#ff6b6b;
  --radius:16px; --pad:14px; --safe: env(safe-area-inset-bottom);
}

* { box-sizing: border-box; }
html, body { margin:0; padding:0; background:var(--bg); color:var(--text);
  font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; }
body { overflow-y:auto; -webkit-overflow-scrolling:touch; }

.app-header { padding:18px var(--pad) 6px; position:sticky; top:0; z-index:2;
  background:linear-gradient(180deg, rgba(15,17,21,0.98), rgba(15,17,21,0.94) 70%, rgba(15,17,21,0));
  backdrop-filter: blur(6px); }
.app-header h1 { margin:0; font-size:1.8rem; font-weight:800; letter-spacing:.2px; }

.pages { padding: 8px var(--pad) 90px; }
.page { display:none; }
.page.active { display:block; }

.card { background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
  padding: var(--pad); margin-bottom:12px; position:relative; }
.section-title { font-weight:800; font-size:1.05rem; margin-bottom:8px; }
.muted { color:var(--muted); }

.metric { }
.metric-title { color:var(--muted); font-size:.95rem; margin-bottom:6px; }
.metric-value { font-weight:800; font-size:1.8rem; }
.metric-value.positive { color: var(--good); }

.chart-card { padding: 8px var(--pad) 12px; }

.input { width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--line); background:#0f131c; color:var(--text); margin-bottom:10px; }
.row { display:flex; gap:8px; flex-wrap:wrap; }
.btn { padding:10px 14px; border-radius:12px; border:1px solid var(--line); background:#0f131c; color:var(--text); font-weight:700; }
.btn.small { padding:8px 12px; font-size:.95rem; }
.btn.primary { background:#1e2a40; border-color:#2c3a56; }
.btn.danger { background:#2a1212; border-color:#7a2a2a; color:#ffd9d9; }
.right-btn { position:absolute; right:var(--pad); top:var(--pad); }

.quick-amounts { display:flex; gap:8px; margin:6px 0 10px; flex-wrap:wrap; }
.chip { padding:8px 10px; border-radius:12px; border:1px solid var(--line); background:#0f131c; color:var(--text); }

.list { display:grid; gap:8px; }
.item { display:flex; align-items:center; justify-content:space-between; background:#121620; border:1px solid var(--line); border-radius:12px; padding:10px 12px; }
.item .left { display:flex; flex-direction:column; gap:4px; }
.item .name { font-weight:800; }
.item .meta { color:var(--muted); font-size:.9rem; }
.item .amount { font-weight:800; }
.item .del { margin-left:10px; border-radius:10px; padding:6px 10px; background:#281a1a; border:1px solid #553; color:#ffd9d9; }

.tabbar { position:fixed; left:0; right:0; bottom:0; padding:8px 10px calc(8px + var(--safe));
  background:#0f1115ee; border-top:1px solid var(--line); display:flex; gap:10px; justify-content:space-around; z-index:3; }
.tab { flex:1; padding:10px 12px; border-radius:14px; border:1px solid var(--line); background:#0f131c; color:var(--text); font-weight:700; }
.tab.active { outline:2px solid #2f3b54; }

canvas { display:block; width:100%; height:220px; }

@media (min-width: 720px) {
  .pages { max-width: 720px; margin: 0 auto; }
}
/* ===== v1.4.1 — Button/Tap + Emoji UI (append to end) ===== */
:root { --safe-bottom: env(safe-area-inset-bottom); }

button, .btn, .tab {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* Emoji-only buttons */
.btn-emoji {
  font-size: 22px;
  line-height: 1;
  width: 44px; height: 44px;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 12px; border: 1px solid #2a3142;
  background: #0f131c; color: #e7e9ee; cursor: pointer;
}

/* Tab bar as emoji */
.tab {
  font-size: 22px;
  display: inline-flex; align-items: center; justify-content: center;
  height: 44px; min-width: 44px; border-radius: 14px;
}
.tab.active { outline: 2px solid #2f3b54; }

/* Trash buttons in list */
.btn-trash {
  font-size: 20px; width: 40px; height: 40px;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 10px; border: 1px solid #553; background: #281a1a; color: #ffd9d9;
}

/* Ensure nothing invisible eats taps */
.overlay, .scrim, .backdrop { pointer-events: none; }

/* Keep page scrollable on iOS */
html, body { overflow-x: hidden; }
body { overflow-y: auto; -webkit-overflow-scrolling: touch; }
/* ===== v1.2: iOS scroll + bottom bar fixes ===== */
:root { --safe-bottom: env(safe-area-inset-bottom); }

html, body {
  margin: 0; padding: 0;
  height: auto; min-height: 100%;
  overflow-x: hidden;        /* stop sideways jiggle */
}

body {
  /* Never lock vertical scroll globally */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

#app, .app, .page, main {
  min-height: 100dvh;        /* use dynamic viewport, not 100vh */
}

.main-scroll {
  flex: 1 1 auto;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
}

/* Bottom nav: use sticky, not full-screen fixed overlay */
.navbar {
  position: sticky; bottom: 0; left: 0; right: 0;
  padding-bottom: calc(8px + var(--safe-bottom));
  z-index: 10;
  backdrop-filter: blur(6px);
}

/* Make sure nothing invisible blocks taps */
.overlay, .scrim, .backdrop {
  pointer-events: none;   /* they can be visually present but won’t eat taps */
}

/* Chart sized sanely; no absolute overlay */
.chart-wrap { position: relative; }
.chart-wrap canvas { display: block; width: 100%; height: 220px; }

/* Buttons behave on iOS */
button, .btn {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* Safety: never globally hide overflow on body/html again */
html.no-scroll, body.no-scroll { overflow: auto !important; }
