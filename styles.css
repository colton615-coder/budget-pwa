:root{
  --bg: #0b0f14;
  --card: #10161b;
  --ink: #e8f0f6;
  --muted: #a9b7c6;
  --brand: #0ea5e9;
  --accent: #22c55e;
  --warn: #ef4444;
  --tile: #0f1720;
  --ring: rgba(14,165,233,0.25);
  --shadow: 0 10px 25px rgba(0,0,0,.25);
  --radius: 14px;

  /* category palette */
  --c-housing:#60a5fa;
  --c-transport:#f59e0b;
  --c-utilities:#34d399;
  --c-debt:#f87171;
  --c-fixedother:#f472b6;
  --c-food:#22d3ee;
  --c-household:#a78bfa;
  --c-personal:#fb7185;
  --c-medical:#84cc16;
  --c-othervar:#eab308;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Text",
  "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color:var(--ink); background:linear-gradient(180deg,#071018,#0b1620 50%, #0b0f14);
}

.safe-edge{padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom)}

.app-header{position:sticky; top:0; z-index:5; backdrop-filter: blur(8px); background:linear-gradient(180deg, rgba(0,0,0,.5), rgba(0,0,0,0));}
.topbar{display:flex; align-items:center; gap:.75rem; padding: .75rem 1rem 0 .75rem}
.topbar h1{font-size:1.15rem; margin:0; letter-spacing:.3px}
.logo{width:28px; height:28px}
.icon-btn{margin-left:auto; background:#0b1b28; color:#bfe8ff; border:1px solid #0c2b40; border-radius:10px; padding:.5rem .65rem}
.icon-btn:active{transform:scale(.98)}

.tiles{display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:.5rem; padding: .75rem}
.tile{background:var(--tile); border:1px solid #0e2233; border-radius:12px; padding:.65rem .75rem; box-shadow:var(--shadow)}
.tile-label{font-size:.75rem; color:var(--muted)}
.tile-value{font-size:1.1rem; font-weight:700}

main{padding: .75rem}

.card{
  background:var(--card); border:1px solid #0d2233; border-radius: var(--radius);
  padding: .9rem; margin: .75rem 0; box-shadow: var(--shadow);
}
.card h2{margin:.2rem 0 .6rem; font-size:1.05rem}
.card h3{margin:.2rem 0 .6rem; font-size:1rem}

.row-form, .grid-form{display:grid; gap:.5rem; margin:.5rem 0}
.row-form{grid-template-columns: 1fr 1fr auto}
.grid-form{grid-template-columns: 120px 1.5fr 1.2fr 110px 1fr 1.2fr auto}
@media (max-width:900px){
  .grid-form{grid-template-columns: 1fr 1fr}
}
input, select, button{
  border-radius:10px; border:1px solid #12314a; background:#0b1b28; color:var(--ink);
  padding:.65rem .7rem; outline:none;
}
input:focus, select:focus{box-shadow:0 0 0 3px var(--ring)}
input[type="number"]{text-align:right}

.btn{background:linear-gradient(180deg,#14b4f0, #0ea5e9); color:#052436; font-weight:700; border:none}
.btn:active{transform:translateY(1px)}

.table{width:100%; border-collapse:collapse; overflow:hidden; border-radius:12px; margin:.5rem 0}
.table th, .table td{padding:.6rem .5rem; border-bottom:1px solid #0d2233; white-space:nowrap}
.table th{color:#b9d8eb; text-align:left; font-weight:600}
.table .r{text-align:right}
.table .c{text-align:center}
.scroll-x{overflow-x:auto; -webkit-overflow-scrolling: touch}

.totals{display:flex; justify-content:flex-end; gap:1rem; margin-top:.5rem}
.muted{color:var(--muted); font-size:.9rem}

.group{margin:.6rem 0 .8rem; border:1px dashed #14324a; border-radius:12px; padding:.5rem}
.group h4{margin:.2rem 0 .5rem; font-size:.95rem}
.group .row{display:grid; grid-template-columns: 1.2fr .8fr .8fr; gap:.4rem; align-items:center; margin:.25rem 0}
.group .row label{display:flex; align-items:center; gap:.4rem}
.badge{padding:.15rem .5rem; border-radius:999px; font-size:.72rem; background:#0c2030; border:1px solid #13324a}
.badge.need{color:#93e5a3}
.badge.want{color:#ffb4b4}

.chart{background:#0b1220; border:1px solid #0d2233; border-radius:12px; padding:.6rem; box-shadow: var(--shadow); margin:.6rem 0}
.charts{display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:.6rem}
@media (max-width:900px){ .charts{grid-template-columns: 1fr} }

.sheet{position:fixed; inset:auto 0 0 0; transform: translateY(100%); transition:.25s transform; background: #0b1118; border-top:1px solid #0d2233; border-top-left-radius:16px; border-top-right-radius:16px; z-index:40}
.sheet[aria-hidden="false"]{transform:translateY(0)}
.sheet-close{position:absolute; right:.75rem; top:.65rem}
.sheet-content{padding:2.5rem .75rem .8rem; display:grid; gap:.5rem}
.menu-action{display:block; width:100%; text-align:left; padding:.7rem .8rem; border-radius:12px; border:1px solid #11304a; background:#0b1b28}
.menu-action.warn{border-color:#3b0d10; color:#ffd0d0; background:#22080a}
.menu-action.file input{display:none}

.app-footer{padding: .35rem .8rem}
#status{color:#94d6ff; font-size:.9rem}

.color-dot{width:10px; height:10px; border-radius:50%; display:inline-block; vertical-align:middle; margin-right:.4rem}

/* Category color helper classes */
.color-housing{color:var(--c-housing)}
.color-transport{color:var(--c-transport)}
.color-utilities{color:var(--c-utilities)}
.color-debt{color:var(--c-debt)}
.color-fixedother{color:var(--c-fixedother)}
.color-food{color:var(--c-food)}
.color-household{color:var(--c-household)}
.color-personal{color:var(--c-personal)}
.color-medical{color:var(--c-medical)}
.color-othervar{color:var(--c-othervar)}
