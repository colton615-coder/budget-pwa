<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <title>Budget Buddy</title>

  <!-- iOS PWA meta -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Budget Buddy" />
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png" />

  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#0ea5e9" />

  <link rel="stylesheet" href="styles.css" />

  <!-- Chart.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"
          integrity="sha384-Qx8u90W5xCuD5RLcbYV2F6T+byDgOQVOvJr2Z8QQ7JrGdF3uz6Zfx9qrZJ8uY0m+"
          crossorigin="anonymous"></script>

  <script defer src="app.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="safe-edge"></div>
    <div class="container topbar">
      <img src="assets/logo.svg" alt="" class="logo" />
      <h1 class="app-title">Budget Buddy</h1>
      <button id="btn-open-menu" class="icon-btn" aria-label="Open menu">☰</button>
    </div>
  </header>

  <!-- Sheet (export/import/sample) -->
  <nav id="sheet-menu" class="sheet" aria-hidden="true" aria-label="Menu">
    <button class="sheet-close" id="btn-close-menu" aria-label="Close menu">✕</button>
    <div class="sheet-content container">
      <button class="menu-action" id="btn-export">⬇️ Export Data (JSON)</button>
      <label class="menu-action file">
        ⬆️ Import Data (JSON)
        <input id="file-import" type="file" accept="application/json" />
      </label>
      <button class="menu-action warn" id="btn-clear-month">🧹 Reset Current Month</button>
      <button class="menu-action" id="btn-load-sample">✨ Load Sample Data</button>
      <a class="menu-action" href="#tab-style" data-tab-link="style">🎨 Styling Primer</a>
    </div>
  </nav>

  <!-- Tabs -->
  <nav class="tabs" role="tablist" aria-label="Primary">
    <button class="tab is-active" role="tab" aria-selected="true" aria-controls="tab-overview" data-tab="overview" title="Overview">🏠</button>
    <button class="tab" role="tab" aria-controls="tab-income" data-tab="income" title="Income">💵</button>
    <button class="tab" role="tab" aria-controls="tab-budget" data-tab="budget" title="Budget">🧮</button>
    <button class="tab" role="tab" aria-controls="tab-transactions" data-tab="transactions" title="Transactions">🧾</button>
    <button class="tab" role="tab" aria-controls="tab-savings" data-tab="savings" title="Savings">🎯</button>
    <button class="tab" role="tab" aria-controls="tab-debt" data-tab="debt" title="Debt">💳</button>
    <button class="tab" role="tab" aria-controls="tab-analytics" data-tab="analytics" title="Analytics">📈</button>
    <button class="tab" role="tab" aria-controls="tab-style" data-tab="style" title="Style">🎨</button>
    <button class="tab" role="tab" aria-controls="tab-settings" data-tab="settings" title="Settings">⚙️</button>
  </nav>

  <main class="container main">
    <!-- OVERVIEW -->
    <section id="tab-overview" class="panel is-active" role="tabpanel" aria-labelledby="tab-overview">
      <div class="card">
        <h2>Overview</h2>
        <div class="tiles">
          <article class="tile tile--month">
            <p class="tile-label">Month</p>
            <div class="tile-control">
              <input id="monthPicker" type="month" aria-label="Select month" />
            </div>
          </article>
          <article class="tile">
            <p class="tile-label">Income</p>
            <p class="tile-value" id="tl-income">$0</p>
          </article>
          <article class="tile">
            <p class="tile-label">Expenses</p>
            <p class="tile-value" id="tl-expenses">$0</p>
          </article>
          <article class="tile">
            <p class="tile-label">Budget Result</p>
            <p class="tile-value" id="tl-result">$0</p>
          </article>
        </div>
      </div>
    </section>

    <!-- INCOME -->
    <section id="tab-income" class="panel" role="tabpanel" aria-labelledby="tab-income">
      <div class="card">
        <h2>Monthly Income</h2>
        <form id="income-form" class="row-form" autocomplete="off">
          <label class="field">
            <span class="field-label">Source</span>
            <input type="text" id="income-source" placeholder="Paycheck, Side hustle…" required />
          </label>
          <label class="field">
            <span class="field-label">Amount</span>
            <input type="number" inputmode="decimal" step="0.01" min="0" id="income-amount" placeholder="0.00" required />
          </label>
          <button type="submit" class="btn">Add</button>
        </form>
        <div class="table-wrap">
          <table class="table" aria-label="Income list">
            <thead>
              <tr><th>Source</th><th class="r">Amount</th><th class="c">Actions</th></tr>
            </thead>
            <tbody id="income-tbody"></tbody>
            <tfoot>
              <tr><th>Total</th><th class="r" id="income-total">$0</th><th></th></tr>
            </tfoot>
          </table>
        </div>
      </div>
    </section>

    <!-- BUDGET -->
    <section id="tab-budget" class="panel" role="tabpanel" aria-labelledby="tab-budget">
      <div class="card">
        <h2>Budget Planner</h2>
        <p class="muted">Set your budgeted amounts per category for the selected month.</p>
        <div id="budget-groups" class="budget-grid"></div>
        <div class="totals">
          <div>Budgeted Total: <strong id="budgeted-total">$0</strong></div>
        </div>
      </div>
    </section>

    <!-- TRANSACTIONS -->
    <section id="tab-transactions" class="panel" role="tabpanel" aria-labelledby="tab-transactions">
      <div class="card">
        <h2>Track Expenses</h2>
        <form id="tx-form" class="grid-form" autocomplete="off">
          <label class="field">
            <span class="field-label">Date</span>
            <input type="date" id="tx-date" required />
          </label>
          <label class="field field--wide">
            <span class="field-label">Description</span>
            <input type="text" id="tx-desc" placeholder="Groceries @ Trader Joe's" required />
          </label>
          <label class="field">
            <span class="field-label">Category</span>
            <select id="tx-category" required></select>
          </label>
          <label class="field">
            <span class="field-label">Need / Want</span>
            <select id="tx-needwant">
              <option value="need">Need</option>
              <option value="want">Want</option>
            </select>
          </label>
          <label class="field">
            <span class="field-label">Amount</span>
            <input type="number" inputmode="decimal" step="0.01" min="0" id="tx-amount" placeholder="0.00" required />
          </label>
          <label class="field field--wide">
            <span class="field-label">Notes</span>
            <input type="text" id="tx-notes" placeholder="Why over/under…" />
          </label>
          <button class="btn form-submit" type="submit">Add</button>
        </form>

        <div class="table-wrap">
          <table class="table" aria-label="Transactions">
            <thead>
              <tr>
                <th>Date</th><th>Description</th><th>Category</th>
                <th>Need/Want</th><th class="r">Amount</th><th>Notes</th><th class="c">Actions</th>
              </tr>
            </thead>
            <tbody id="tx-tbody"></tbody>
            <tfoot>
              <tr><th colspan="4">Total Expenses</th><th class="r" id="tx-total">$0</th><th colspan="2"></th></tr>
            </tfoot>
          </table>
        </div>
      </div>
    </section>

    <!-- SAVINGS -->
    <section id="tab-savings" class="panel" role="tabpanel" aria-labelledby="tab-savings">
      <div class="card">
        <h2>Savings & Goals</h2>
        <form id="goal-form" class="row-form" autocomplete="off">
          <label class="field">
            <span class="field-label">Goal name</span>
            <input type="text" id="goal-name" placeholder="Emergency Fund, Vacation…" required />
          </label>
          <label class="field">
            <span class="field-label">Target amount</span>
            <input type="number" step="0.01" min="0" id="goal-target" placeholder="0.00" required />
          </label>
          <button class="btn">Add goal</button>
        </form>

        <div id="goal-list" class="goal-list"></div>

        <form id="save-form" class="row-form" autocomplete="off">
          <label class="field">
            <span class="field-label">Goal</span>
            <select id="save-goal" required></select>
          </label>
          <label class="field">
            <span class="field-label">Date</span>
            <input type="date" id="save-date" required />
          </label>
          <label class="field">
            <span class="field-label">Amount</span>
            <input type="number" step="0.01" min="0" id="save-amount" placeholder="0.00" required />
          </label>
          <button class="btn">Add saving</button>
        </form>

        <div class="table-wrap">
          <table class="table">
            <thead><tr><th>Date</th><th>Goal</th><th class="r">Amount</th><th class="c">Actions</th></tr></thead>
            <tbody id="save-tbody"></tbody>
            <tfoot><tr><th colspan="2">This Month Saved</th><th class="r" id="save-total">$0</th><th></th></tr></tfoot>
          </table>
        </div>
      </div>
    </section>

    <!-- DEBT -->
    <section id="tab-debt" class="panel" role="tabpanel" aria-labelledby="tab-debt">
      <div class="card">
        <h2>Debt Repayment (Extra)</h2>
        <form id="debt-form" class="row-form" autocomplete="off">
          <label class="field">
            <span class="field-label">Debt name</span>
            <input type="text" id="debt-name" placeholder="Card, Student Loan…" required />
          </label>
          <label class="field">
            <span class="field-label">Date</span>
            <input type="date" id="debt-date" required />
          </label>
          <label class="field">
            <span class="field-label">Amount</span>
            <input type="number" step="0.01" min="0" id="debt-amount" placeholder="0.00" required />
          </label>
          <button class="btn">Add payment</button>
        </form>

        <div class="table-wrap">
          <table class="table">
            <thead><tr><th>Date</th><th>Debt</th><th class="r">Extra Paid</th><th class="c">Actions</th></tr></thead>
            <tbody id="debt-tbody"></tbody>
            <tfoot><tr><th colspan="2">Extra Payments Total</th><th class="r" id="debt-total">$0</th><th></th></tr></tfoot>
          </table>
        </div>
      </div>
    </section>

    <!-- ANALYTICS -->
    <section id="tab-analytics" class="panel" role="tabpanel" aria-labelledby="tab-analytics">
      <div class="card">
        <h2>Analytics</h2>
        <div class="charts">
          <div class="chart">
            <h3>Spending by Category</h3>
            <canvas id="chart-category" height="180"></canvas>
          </div>
          <div class="chart">
            <h3>Budget vs Actual</h3>
            <canvas id="chart-budget" height="180"></canvas>
          </div>
          <div class="chart">
            <h3>Needs vs Wants</h3>
            <canvas id="chart-needwant" height="180"></canvas>
          </div>
          <div class="chart">
            <h3>Cumulative Cashflow</h3>
            <canvas id="chart-cashflow" height="180"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- STYLING PRIMER -->
    <section id="tab-style" class="panel" role="tabpanel" aria-labelledby="tab-style">
      <div class="card">
        <h2>Styling Primer</h2>
        <div class="two-col">
          <div class="callout">
            <h3>Styling</h3>
            <ul class="bullets">
              <li><strong>Typography</strong>: The style and appearance of text, including fonts, sizing, and spacing.</li>
              <li><strong>Color palette</strong>: The collection of colors used to represent the brand and add visual appeal.</li>
              <li><strong>Visual hierarchy</strong>: The arrangement of elements to show their level of importance, guiding the user's eye.</li>
              <li><strong>Animations</strong>: Small movements or effects that enhance the user's interaction and make the interface more dynamic.</li>
            </ul>
          </div>
          <div class="callout">
            <h3>Common design styles</h3>
            <ul class="bullets">
              <li><strong>Flat design</strong>: A minimalist style with simple, two-dimensional elements and vibrant colors.</li>
              <li><strong>Material design</strong>: Google’s layered, tactile system that uses depth, motion, and elevation.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="tab-settings" class="panel" role="tabpanel" aria-labelledby="tab-settings">
      <div class="card">
        <h2>Settings</h2>
        <form id="settings-form" class="settings-grid" autocomplete="off">
          <label class="field">
            <span class="field-label">Currency</span>
            <select id="set-currency">
              <option>USD</option><option>EUR</option><option>GBP</option><option>CAD</option>
              <option>AUD</option><option>JPY</option><option>INR</option><option>MXN</option><option>BRL</option>
            </select>
          </label>

          <label class="field">
            <span class="field-label">Brand color</span>
            <input type="color" id="set-brand" value="#0ea5e9" />
          </label>

          <label class="field">
            <span class="field-label">Reduced motion</span>
            <select id="set-motion">
              <option value="off">Off</option>
              <option value="on">On</option>
            </select>
          </label>

          <label class="field">
            <span class="field-label">Default Need/Want</span>
            <select id="set-default-nw">
              <option value="need">Need</option>
              <option value="want">Want</option>
            </select>
          </label>

          <button class="btn">Save Settings</button>
        </form>

        <div class="settings-actions">
          <button class="menu-action warn" id="btn-reset-all">⚠️ Reset ALL data</button>
        </div>
      </div>

      <footer class="app-footer">
        <div id="status" role="status" aria-live="polite"></div>
        <div class="safe-edge"></div>
      </footer>
    </section>
  </main>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(console.error);
      });
    }
  </script>
</body>
</html>
